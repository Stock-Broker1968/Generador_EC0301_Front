<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillsCert EC0301 - Acceso</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .header {
            background: rgba(255,255,255,0.95);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        .logo { display: flex; align-items: center; gap: 1rem; }
        .logo i { font-size: 2rem; color: #6366f1; }
        .logo h1 { font-size: 1.4rem; color: #1e293b; }
        .logo span { display: block; font-size: 0.8rem; color: #64748b; }
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .btn-primary { background: #6366f1; color: white; }
        .btn-primary:hover { background: #4f46e5; transform: translateY(-2px); }
        .btn-success { background: #10b981; color: white; }
        .btn-success:hover { background: #059669; }
        .btn-secondary { background: #64748b; color: white; }
        .btn-secondary:hover { background: #475569; }
        .btn-orange { background: #f59e0b; color: white; }
        .btn-orange:hover { background: #d97706; }
        .main-content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        .card {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 2.5rem;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 25px 60px rgba(0,0,0,0.2);
        }
        .card-title {
            text-align: center;
            font-size: 1.8rem;
            color: #1e293b;
            margin-bottom: 0.5rem;
            font-style: italic;
        }
        .card-subtitle {
            text-align: center;
            color: #64748b;
            margin-bottom: 2rem;
        }
        .form-section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #e2e8f0;
        }
        .form-section h3 {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.1rem;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }
        .form-section p {
            font-size: 0.85rem;
            color: #64748b;
            margin-bottom: 1rem;
        }
        .input-group { margin-bottom: 1rem; }
        .input-group input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        .input-group input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99,102,241,0.1);
        }
        .input-group input.error { border-color: #ef4444; }
        .input-group input.success { border-color: #10b981; }
        .error-msg {
            color: #ef4444;
            font-size: 0.85rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .success-msg {
            color: #10b981;
            font-size: 0.85rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .btn-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }
        .divider {
            text-align: center;
            margin: 1.5rem 0;
            color: #94a3b8;
            position: relative;
        }
        .divider::before, .divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40%;
            height: 1px;
            background: #e2e8f0;
        }
        .divider::before { left: 0; }
        .divider::after { right: 0; }
        .hidden { display: none !important; }
        .footer {
            text-align: center;
            padding: 1.5rem;
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
        }
        /* Modal de √©xito */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            max-width: 400px;
            animation: modalIn 0.3s ease;
        }
        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        .modal-icon {
            width: 80px;
            height: 80px;
            background: #10b981;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
        }
        .modal-icon i { font-size: 2.5rem; color: white; }
        .modal-title { font-size: 1.8rem; color: #1e293b; margin-bottom: 1rem; }
        .modal-text { color: #64748b; margin-bottom: 1.5rem; }
        .code-display {
            background: #f1f5f9;
            padding: 1.5rem;
            border-radius: 12px;
            font-size: 2rem;
            font-weight: bold;
            letter-spacing: 0.3rem;
            color: #6366f1;
            margin-bottom: 1.5rem;
            font-family: monospace;
        }
        /* C√≥digos v√°lidos de prueba */
        .test-codes {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.85rem;
        }
        .test-codes strong { color: #92400e; }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">
            <i class="fas fa-graduation-cap"></i>
            <div>
                <h1>SkillsCert EC0301</h1>
                <span>Sistema Integral de Dise√±o de Cursos</span>
            </div>
        </div>
        <button class="btn btn-primary" id="btnHeaderLogin">
            <i class="fas fa-key"></i>
            Iniciar Sesi√≥n
        </button>
    </header>

    <main class="main-content">
        <div class="card">
            <h2 class="card-title">Bienvenido a SkillsCert</h2>
            <p class="card-subtitle">Sistema profesional de dise√±o de cursos EC0301</p>

            <!-- SECCI√ìN 1: INGRESAR C√ìDIGO -->
            <div class="form-section" id="sectionCode">
                <h3>
                    <i class="fas fa-lock" style="color: #f59e0b;"></i>
                    Ingresa tu c√≥digo de acceso
                </h3>
                <p>C√≥digo de 8 caracteres que recibiste por email/WhatsApp</p>
                <div class="input-group">
                    <input type="text" id="inputCode" placeholder="Ej: VJW8P2GB" maxlength="8" style="text-transform: uppercase; letter-spacing: 0.2rem; font-weight: bold;">
                    <div class="error-msg hidden" id="errorCode">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>El c√≥digo no es v√°lido</span>
                    </div>
                    <div class="success-msg hidden" id="successCode">
                        <i class="fas fa-check-circle"></i>
                        <span>¬°C√≥digo v√°lido!</span>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" id="btnValidateCode">
                        <i class="fas fa-sign-in-alt"></i>
                        Iniciar Sesi√≥n
                    </button>
                    <button class="btn btn-secondary" id="btnCancelCode">
                        Cancelar
                    </button>
                </div>
                
                <!-- C√≥digos de prueba para desarrollo -->
                <div class="test-codes">
                    <strong>üîß C√≥digos de prueba v√°lidos:</strong><br>
                    VJW8P2GB ‚Ä¢ TEST1234 ‚Ä¢ DEMO2025 ‚Ä¢ EC030101
                </div>
            </div>

            <div class="divider">o</div>

            <!-- SECCI√ìN 2: PAGAR ACCESO -->
            <button class="btn btn-orange" style="width: 100%; justify-content: center; padding: 1rem;" id="btnPayAccess">
                <i class="fas fa-credit-card"></i>
                Pagar Acceso (2500 MXN)
            </button>

            <!-- SECCI√ìN OCULTA: REGISTRO PARA PAGO -->
            <div class="form-section hidden" id="sectionRegister">
                <h3>
                    <i class="fas fa-envelope" style="color: #6366f1;"></i>
                    Ingresa tu correo electr√≥nico
                </h3>
                <p>Recibir√°s tu c√≥digo de acceso aqu√≠</p>
                <div class="input-group">
                    <input type="email" id="inputEmail" placeholder="correo@ejemplo.com">
                    <div class="error-msg hidden" id="errorEmail">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>Ingresa un correo v√°lido</span>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" id="btnContinue">Continuar</button>
                    <button class="btn btn-secondary" id="btnCancelRegister">Cancelar</button>
                </div>
            </div>

            <!-- SECCI√ìN OCULTA: WHATSAPP -->
            <div class="form-section hidden" id="sectionWhatsapp">
                <h3>
                    <i class="fab fa-whatsapp" style="color: #25d366;"></i>
                    N√∫mero de WhatsApp (opcional)
                </h3>
                <p>Para recibir tu c√≥digo tambi√©n por WhatsApp</p>
                <div class="input-group">
                    <input type="tel" id="inputWhatsapp" placeholder="+52 55 1234 5678">
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" id="btnProceedPayment">Proceder al pago</button>
                    <button class="btn btn-secondary" id="btnSkipWhatsapp">Omitir</button>
                </div>
            </div>
        </div>
    </main>

    <!-- MODAL DE √âXITO -->
    <div class="modal-overlay hidden" id="modalSuccess">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-check"></i>
            </div>
            <h3 class="modal-title">¬°Acceso Concedido!</h3>
            <p class="modal-text">Bienvenido al Sistema EC0301</p>
            <button class="btn btn-success" style="width: 100%; justify-content: center;" id="btnGoToDashboard">
                <i class="fas fa-arrow-right"></i>
                Ir al Panel de Control
            </button>
        </div>
    </div>

    <footer class="footer">
        ¬© 2024 SkillsCert EC0301. Sistema profesional de dise√±o de cursos de capacitaci√≥n.
    </footer>

    <script>
        // ============================================
        // C√ìDIGOS V√ÅLIDOS (En producci√≥n, esto vendr√≠a del servidor)
        // ============================================
        const VALID_CODES = [
            'VJW8P2GB',
            'TEST1234',
            'DEMO2025',
            'EC030101',
            'ADMIN123',
            'PRUEBA01'
        ];

        // ============================================
        // ELEMENTOS DEL DOM
        // ============================================
        const $ = id => document.getElementById(id);
        
        const inputCode = $('inputCode');
        const btnValidateCode = $('btnValidateCode');
        const btnCancelCode = $('btnCancelCode');
        const errorCode = $('errorCode');
        const successCode = $('successCode');
        
        const btnPayAccess = $('btnPayAccess');
        const sectionRegister = $('sectionRegister');
        const sectionWhatsapp = $('sectionWhatsapp');
        const sectionCode = $('sectionCode');
        
        const inputEmail = $('inputEmail');
        const btnContinue = $('btnContinue');
        const btnCancelRegister = $('btnCancelRegister');
        const errorEmail = $('errorEmail');
        
        const inputWhatsapp = $('inputWhatsapp');
        const btnProceedPayment = $('btnProceedPayment');
        const btnSkipWhatsapp = $('btnSkipWhatsapp');
        
        const modalSuccess = $('modalSuccess');
        const btnGoToDashboard = $('btnGoToDashboard');
        
        const btnHeaderLogin = $('btnHeaderLogin');

        // ============================================
        // FUNCIONES
        // ============================================
        
        function validateCode() {
            const code = inputCode.value.trim().toUpperCase();
            
            if (code.length < 6) {
                inputCode.classList.add('error');
                inputCode.classList.remove('success');
                errorCode.classList.remove('hidden');
                errorCode.querySelector('span').textContent = 'El c√≥digo debe tener al menos 6 caracteres';
                successCode.classList.add('hidden');
                return;
            }
            
            if (VALID_CODES.includes(code)) {
                // C√≥digo v√°lido
                inputCode.classList.remove('error');
                inputCode.classList.add('success');
                errorCode.classList.add('hidden');
                successCode.classList.remove('hidden');
                
                // Guardar sesi√≥n
                localStorage.setItem('ec0301_auth', 'true');
                localStorage.setItem('ec0301_user', JSON.stringify({
                    code: code,
                    loginTime: new Date().toISOString(),
                    nombre: 'Usuario EC0301'
                }));
                
                // Mostrar modal de √©xito
                setTimeout(() => {
                    modalSuccess.classList.remove('hidden');
                }, 500);
            } else {
                // C√≥digo inv√°lido
                inputCode.classList.add('error');
                inputCode.classList.remove('success');
                errorCode.classList.remove('hidden');
                errorCode.querySelector('span').textContent = 'C√≥digo no v√°lido. Verifica e intenta de nuevo.';
                successCode.classList.add('hidden');
            }
        }
        
        function showRegisterSection() {
            sectionCode.classList.add('hidden');
            btnPayAccess.classList.add('hidden');
            sectionRegister.classList.remove('hidden');
            document.querySelector('.divider').classList.add('hidden');
        }
        
        function showWhatsappSection() {
            const email = inputEmail.value.trim();
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (!emailRegex.test(email)) {
                errorEmail.classList.remove('hidden');
                inputEmail.classList.add('error');
                return;
            }
            
            errorEmail.classList.add('hidden');
            inputEmail.classList.remove('error');
            
            sectionRegister.classList.add('hidden');
            sectionWhatsapp.classList.remove('hidden');
        }
        
        function proceedToPayment() {
            const email = inputEmail.value.trim();
            const whatsapp = inputWhatsapp.value.trim();
            
            // Guardar datos temporalmente
            localStorage.setItem('ec0301_pending', JSON.stringify({
                email: email,
                whatsapp: whatsapp
            }));
            
            // Simular pago exitoso (en producci√≥n, redirigir a Stripe)
            alert('üîß Modo de desarrollo:\n\nEn producci√≥n, esto redirigir√° a Stripe.\n\nPor ahora, usa uno de los c√≥digos de prueba para acceder.');
            
            // Restaurar vista
            resetView();
        }
        
        function resetView() {
            sectionCode.classList.remove('hidden');
            btnPayAccess.classList.remove('hidden');
            sectionRegister.classList.add('hidden');
            sectionWhatsapp.classList.add('hidden');
            document.querySelector('.divider').classList.remove('hidden');
            
            inputCode.value = '';
            inputEmail.value = '';
            inputWhatsapp.value = '';
            inputCode.classList.remove('error', 'success');
            errorCode.classList.add('hidden');
            successCode.classList.add('hidden');
        }
        
        function goToDashboard() {
            window.location.href = 'dashboard.html';
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        
        btnValidateCode.addEventListener('click', validateCode);
        
        inputCode.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') validateCode();
        });
        
        inputCode.addEventListener('input', () => {
            inputCode.value = inputCode.value.toUpperCase();
            errorCode.classList.add('hidden');
            successCode.classList.add('hidden');
            inputCode.classList.remove('error', 'success');
        });
        
        btnCancelCode.addEventListener('click', () => {
            inputCode.value = '';
            errorCode.classList.add('hidden');
            successCode.classList.add('hidden');
            inputCode.classList.remove('error', 'success');
        });
        
        btnPayAccess.addEventListener('click', showRegisterSection);
        
        btnContinue.addEventListener('click', showWhatsappSection);
        
        btnCancelRegister.addEventListener('click', resetView);
        
        btnProceedPayment.addEventListener('click', proceedToPayment);
        
        btnSkipWhatsapp.addEventListener('click', proceedToPayment);
        
        btnGoToDashboard.addEventListener('click', goToDashboard);
        
        btnHeaderLogin.addEventListener('click', () => {
            inputCode.focus();
        });

        // ============================================
        // VERIFICAR SI YA EST√Å AUTENTICADO
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            const isAuth = localStorage.getItem('ec0301_auth');
            if (isAuth === 'true') {
                // Ya est√° autenticado, redirigir al dashboard
                window.location.href = 'dashboard.html';
            }
        });
    </script>
</body>
</html>
